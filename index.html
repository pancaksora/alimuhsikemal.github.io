<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>Ali Muhsi Kemal — Renung Aksara</title>
<meta name="description" content="Pelayan Tamu Allah & Penulis. Renung Aksara.">
<link rel="icon" href="assets/logo.svg" type="image/svg+xml">
<style>
:root{
  --bg:#0b0c10; --card:#0f1117; --stroke:rgba(255,255,255,.08);
  --text:#e9ecf2; --muted:#a3adb8; --accent:#ff3b3b;
  --radius:14px;
}
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;background:#0b0c10;color:var(--text);
  font:500 15.2px/1.55 ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Inter,Arial}
a{color:var(--accent);text-decoration:none}
.container{max-width:1160px;margin:auto;padding:12px}
.grid{display:grid;gap:8px}
.grid-2{grid-template-columns:1fr 1fr}.grid-3{grid-template-columns:1fr 1fr 1fr}
.card{background:var(--card);border:1px solid var(--stroke);border-radius:var(--radius);box-shadow:0 8px 22px rgba(0,0,0,.18);padding:8px}
.badge{display:inline-flex;gap:6px;align-items:center;padding:4px 6px;border-radius:999px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.04);font-size:12px}
.btn{padding:6px 10px;border:1px solid rgba(255,255,255,.12);border-radius:12px;background:rgba(255,255,255,.05);color:var(--text);cursor:pointer}
.btn-primary{border-color:rgba(255,59,59,.45);background:linear-gradient(180deg, rgba(255,59,59,.25), rgba(255,59,59,.10))}
.header{position:sticky;top:8px;z-index:20;background:rgba(15,17,23,.6);backdrop-filter:blur(8px);
  border:1px solid var(--stroke);border-radius:14px;padding:6px 8px;display:flex;align-items:center;gap:8px}
.logo{width:34px;height:34px;border-radius:8px;background:#000;display:block}
.brand{display:flex;align-items:center;gap:8px}
.title{font-weight:900;margin:0}
.sub{color:var(--muted);font-size:12px;margin-top:-2px}
.spacer{flex:1}
/* single menu */
.menuBtn{padding:6px 10px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.05)}
/* drawer */
.drawer{position:fixed;inset:0;background:rgba(0,0,0,.5);backdrop-filter:blur(3px);display:none}
.drawer.open{display:block}
.sheet{position:absolute;right:8px;top:8px;width:min(340px,90vw);background:var(--card);border:1px solid var(--stroke);
  border-radius:14px;padding:10px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
.sheet a{display:block;padding:8px;border-radius:10px;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.03);margin-bottom:6px;color:var(--text)}
/* modal hubungi */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.6);backdrop-filter:blur(3px);display:none}
.modal.open{display:block}
.modal .box{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:min(520px,92vw);background:var(--card);
  border:1px solid var(--stroke);border-radius:14px;padding:10px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
.modal .grid{grid-template-columns:1fr 1fr}
.modal a{display:block;padding:8px;border:1px solid rgba(255,255,255,.08);border-radius:10px;background:rgba(255,255,255,.03);color:var(--text)}
.close{float:right;border:none;background:transparent;color:var(--muted);cursor:pointer}
/* hero */
.section{padding:10px 0}
.hero{display:grid;grid-template-columns:1fr .9fr;gap:8px}
h1{margin:0 0 4px;font-size:clamp(22px,3.6vw,36px);line-height:1.2}
.subtitle{color:#a8b5ad;margin:0;font:400 .9rem/1.45 Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial}
.pills{display:flex;gap:6px;flex-wrap:wrap;margin-top:6px}
.cta{display:flex;gap:6px;margin-top:8px;flex-wrap:wrap}
/* lists */
.list{display:grid;gap:6px}
.item{display:flex;justify-content:space-between;gap:6px;padding:6px 8px;border:1px solid rgba(255,255,255,.10);border-radius:10px;background:rgba(255,255,255,.03)}
/* ticker (jadwal & catatan) */
.ticker{max-height:160px;overflow:auto;border:1px dashed rgba(255,255,255,.22);border-radius:12px}
.ticker ul{list-style:none;margin:0;padding:4px}
.ticker li{padding:6px 8px;margin-bottom:4px;border-radius:10px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.1)}
/* prayer panel */
.clock{font-weight:900;font-size:clamp(22px,4.5vw,34px);letter-spacing:.4px;text-shadow:0 0 12px rgba(255,59,59,.18)}
.date{color:var(--muted);font-size:.92rem;margin-top:2px}
.countdown{font-size:.96rem;letter-spacing:.3px;text-shadow:0 0 10px rgba(255,59,59,.18);color:#ffd2d2;font-weight:700}
.prayer-grid{display:grid;grid-template-columns:1fr 1fr;gap:6px;margin-top:6px}
.prayer{display:flex;justify-content:space-between;gap:6px;padding:6px 8px;border:1px solid rgba(255,255,255,.10);border-radius:10px;background:rgba(255,255,255,.03)}
.prayer.next{border-color:rgba(255,59,59,.45);background:linear-gradient(180deg, rgba(255,59,59,.15), rgba(255,59,59,.06))}
/* responsive */
@media (max-width:980px){ .hero{grid-template-columns:1fr} .grid-2,.grid-3{grid-template-columns:1fr 1fr} }
@media (max-width:560px){ .container{padding:10px} .grid-2,.grid-3{grid-template-columns:1fr} }
</style>
</head>
<body>
<div class="container">

  <!-- HEADER -->
  <div class="header">
    <div class="brand">
      <img class="logo" src="assets/logo.svg" alt="Logo">
      <div>
        <div class="title">Ali Muhsi Kemal</div>
        <div class="sub">Pelayan Tamu Allah · Penulis — Renung Aksara</div>
      </div>
    </div>
    <div class="spacer"></div>
    <button class="menuBtn btn" id="openMenu">Menu</button>
    <button class="btn btn-primary" id="openContact">Hubungi</button>
  </div>

  <!-- HERO -->
  <section class="section hero">
    <div class="card">
      <h1>Dari Sunyi — Untuk Semesta</h1>
      <p class="subtitle">menyambut tamu Allah dengan pelayanan yang rapi · menulis kisah yang pelan namun sampai</p>
      <div class="pills">
        <span class="badge">Pelayanan Jamaah</span>
        <span class="badge">Narasi Sejarah</span>
        <span class="badge">Produksi Video</span>
      </div>
      <div class="cta">
        <a class="btn btn-primary" href="#karya">Lihat Karya</a>
        <a class="btn" href="#tulisan">Baca Tulisan</a>
      </div>
    </div>
    <div class="card">
      <h3>Jadwal & Catatan</h3>
      <div class="clock" id="clock">00:00:00</div>
      <div class="date" id="dateLine">—</div>
      <div class="countdown" id="countdown"></div>
      <div class="prayer-grid" id="prayerGrid"></div>
      <div class="ticker"><ul id="ticker"></ul></div>
    </div>
  </section>

  <!-- KARYA -->
  <section id="karya" class="section">
    <div class="card">
      <h3>Karya Pilihan</h3>
      <div class="list" id="karyaList"></div>
    </div>
  </section>

  <!-- TULISAN -->
  <section id="tulisan" class="section">
    <div class="card">
      <h3>Tulisan Terbaru</h3>
      <div class="list" id="tulisanList"></div>
    </div>
  </section>

  <!-- KONTAK NOTE -->
  <section id="kontak" class="section">
    <div class="card">
      <h3>Kontak Singkat</h3>
      <div class="list">
        <div class="item"><span>Untuk naskah: tujuan, panjang, deadline, dan gaya.</span></div>
        <div class="item"><span>Untuk layanan jamaah: jumlah orang, rentang tanggal, preferensi rute.</span></div>
      </div>
    </div>
  </section>

  <footer class="section" style="color:#a3adb8;border-top:1px solid var(--stroke);padding-top:12px">
    © <span id="year"></span> Ali Muhsi Kemal — Renung Aksara · “menulis pelan, sampai jauh.”
  </footer>
</div>

<!-- DRAWER MENU -->
<div class="drawer" id="drawer">
  <div class="sheet">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
      <b>Menu</b>
      <button class="close" id="closeMenu">✕</button>
    </div>
    <a href="#karya">Karya</a>
    <a href="#tulisan">Tulisan</a>
    <a href="#kontak">Kontak</a>
    <a href="#" id="openContact2">Hubungi</a>
  </div>
</div>

<!-- MODAL HUBUNGI -->
<div class="modal" id="contact">
  <div class="box">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
      <b>Hubungi & Sosial</b>
      <button class="close" id="closeContact">✕</button>
    </div>
    <div class="grid">
      <a id="wa" target="_blank" rel="noopener">WhatsApp</a>
      <a id="yt" target="_blank" rel="noopener">YouTube</a>
      <a id="ig" target="_blank" rel="noopener">Instagram</a>
      <a id="tt" target="_blank" rel="noopener">TikTok</a>
      <a id="x" target="_blank" rel="noopener">X (Twitter)</a>
      <a id="threads" target="_blank" rel="noopener">Threads</a>
      <a id="fb" target="_blank" rel="noopener">Facebook</a>
      <a id="site" target="_blank" rel="noopener">Situs</a>
    </div>
  </div>
</div>

<script>
// ===== Drawer
const drawer=document.getElementById('drawer');
document.getElementById('openMenu').onclick=()=>drawer.classList.add('open');
document.getElementById('closeMenu').onclick=()=>drawer.classList.remove('open');
drawer.addEventListener('click',(e)=>{ if(e.target===drawer) drawer.classList.remove('open'); });

// ===== Contact Modal
const modal=document.getElementById('contact');
const openC = ()=>modal.classList.add('open');
document.getElementById('openContact').onclick=openC;
document.getElementById('openContact2').onclick=(e)=>{ e.preventDefault(); drawer.classList.remove('open'); openC(); };
document.getElementById('closeContact').onclick=()=>modal.classList.remove('open');
modal.addEventListener('click',(e)=>{ if(e.target===modal) modal.classList.remove('open'); });

// ===== Clock + Gregorian + Hijri
const clockEl=document.getElementById('clock');
const dateEl=document.getElementById('dateLine');
const countdownEl=document.getElementById('countdown');
const hari=['Minggu','Senin','Selasa','Rabu','Kamis','Jumat','Sabtu'];
const bulan=['Januari','Februari','Maret','April','Mei','Juni','Juli','Agustus','September','Oktober','November','Desember'];
const hMonth=['Muharram','Safar','Rabi’ul Awwal','Rabi’ul Akhir','Jumadil Ula','Jumadil Akhir','Rajab','Sya’ban','Ramadhan','Syawwal','Dzulqa’dah','Dzulhijjah'];

function gregorianToJD(y,m,d){
  if(m<=2){ y-=1; m+=12; }
  const A = Math.floor(y/100);
  const B = 2 - A + Math.floor(A/4);
  return Math.floor(365.25*(y+4716)) + Math.floor(30.6001*(m+1)) + d + B - 1524.5;
}
function islamicToJD(y,m,d){
  const ISLAMIC_EPOCH = 1948439.5;
  return d + Math.ceil(29.5*(m-1)) + (y-1)*354 + Math.floor((3+11*y)/30) + ISLAMIC_EPOCH - 1;
}
function jdToIslamic(jd){
  const ISLAMIC_EPOCH = 1948439.5;
  jd = Math.floor(jd) + 0.5;
  const days = jd - ISLAMIC_EPOCH;
  let year = Math.floor((30*days + 10646)/10631);
  let month = Math.min(12, Math.ceil((days - (29 + (islamicToJD(year,1,1) - ISLAMIC_EPOCH)))/29.5) + 1);
  let day = Math.floor(jd - islamicToJD(year, month, 1)) + 1;
  return {y:year, m:month, d:day};
}
function updateClock(){
  const now = new Date();
  const hh = String(now.getHours()).padStart(2,'0');
  const mm = String(now.getMinutes()).padStart(2,'0');
  const ss = String(now.getSeconds()).padStart(2,'0');
  clockEl.textContent = `${hh}:${mm}:${ss}`;
  const g = `${hari[now.getDay()]}, ${now.getDate()} ${bulan[now.getMonth()]} ${now.getFullYear()}`;
  const jd = gregorianToJD(now.getFullYear(), now.getMonth()+1, now.getDate());
  const h = jdToIslamic(jd);
  const hij = `${h.d} ${hMonth[h.m-1]} ${h.y} H`;
  dateEl.textContent = `${g} / ${hij}`;
}
setInterval(updateClock, 1000); updateClock();

// ===== Prayer times + Countdown
const prayerGrid=document.getElementById('prayerGrid');
const order=['Subuh','Dzuhur','Ashar','Maghrib','Isya'];
let countdownTimer=null;
function hmToMin(hm){
  if(!/^\d{1,2}:\d{2}$/.test(hm||'')) return null;
  const [H,M]=hm.split(':').map(Number); return H*60+M;
}
function computeNext(times){
  const now = new Date();
  const nowMin = now.getHours()*60 + now.getMinutes();
  let best=null, bestDiff=1e9, idx=0;
  order.forEach((nm,i)=>{
    const m = hmToMin(times[nm]);
    if(m==null) return;
    const diff = (m>=nowMin) ? (m-nowMin) : (m+1440-nowMin);
    if(diff<bestDiff){ bestDiff=diff; best={name:nm, min:m}; idx=i; }
  });
  return {idx, ...best, diff:bestDiff};
}
function formatDHMS(s){
  const h=Math.floor(s/3600), m=Math.floor((s%3600)/60), sec=s%60;
  const pad=n=>String(n).padStart(2,'0');
  return `${pad(h)}:${pad(m)}:${pad(sec)}`;
}
function renderShalat(times){
  // build grid
  prayerGrid.innerHTML='';
  const next=computeNext(times);
  order.forEach((nm,i)=>{
    const div=document.createElement('div');
    div.className='prayer'+(i===next.idx ? ' next' : '');
    div.innerHTML=`<b>${nm}</b><span>${times[nm]||'--:--'}</span>`;
    prayerGrid.appendChild(div);
  });
  // start countdown
  if(countdownTimer) clearInterval(countdownTimer);
  function tick(){
    const now=new Date();
    const nextMin = hmToMin(times[next.name]);
    let target=new Date(now);
    if(nextMin!=null){
      target.setHours(Math.floor(nextMin/60), nextMin%60, 0, 0);
      if(target<=now) target=new Date(target.getTime()+24*3600*1000);
    }
    const secs=Math.max(0, Math.floor((target-now)/1000));
    countdownEl.textContent = `Menuju ${next.name} — ${formatDHMS(secs)}`;
    if(secs<=0){ loadShalat(); } // refresh
  }
  tick();
  countdownTimer=setInterval(tick,1000);
}
async function loadShalat(){
  // 1) window.SHOLAT_TIMES (jika sudah disiapkan eksternal)
  if(window.SHOLAT_TIMES){ renderShalat(window.SHOLAT_TIMES); return; }
  // 2) shalat.json
  try{
    const r = await fetch('shalat.json',{cache:'no-store'});
    if(r.ok){
      const js = await r.json();
      if(js && js.times){ renderShalat(js.times); return; }
    }
  }catch(e){}
  // 3) fallback Makkah
  renderShalat({Subuh:'05:14', Dzuhur:'12:07', Ashar:'15:22', Maghrib:'17:44', Isya:'19:00'});
}
loadShalat();

// ===== Ticker (catatan)
const tk=document.getElementById('ticker');
function buildTicker(items){
  tk.innerHTML='';
  items.forEach(x=>{
    const li=document.createElement('li');
    li.innerHTML='<b>'+x.tanggal+'</b> — '+x.judul+' <span class="badge">'+x.catatan+'</span>';
    tk.appendChild(li);
  });
}
buildTicker([{tanggal:'—',judul:'Renung Aksara: narasi baru segera',catatan:'minggu ini'},
             {tanggal:'—',judul:'Slot layanan keluarga',catatan:'by request'}]);

// ===== Karya
const karya=[
  {judul:'Perang Riddah — Narasi Penuh',link:'https://www.youtube.com/@renungaksara'},
  {judul:'Sa’d bin Abi Waqqash — Panah dari Langit',link:'https://www.youtube.com/@renungaksara'},
  {judul:'Renung: Doa Pendek di Perjalanan',link:'https://www.youtube.com/@renungaksara'},
  {judul:'Catatan Perjalanan — Makkah',link:'https://www.youtube.com/@renungaksara'}
];
const list=document.getElementById('karyaList');
karya.forEach(k=>{const el=document.createElement('div');el.className='item';el.innerHTML='<b>'+k.judul+'</b> <span class="badge">baca/tonton</span>'; el.onclick=()=>window.open(k.link,'_blank','noopener'); list.appendChild(el);});

// ===== Tulisan (fallback)
const tulisan=[
 {judul:'Langkah Sunyi',tgl:'2025-10-20',kutipan:'Kita menulis pelan agar makna sempat duduk.'},
 {judul:'Menjaga Nyala',tgl:'2025-10-18',kutipan:'Kecil nyalanya, besar hangatnya.'},
 {judul:'Doa Perjalanan',tgl:'2025-10-15',kutipan:'Antara langkah dan takdir ada doa yang pelan.'},
 {judul:'Denting Malam',tgl:'2025-09-09',kutipan:'Malam adalah buku yang menunggu dibaca hati.'}
];
const tl=document.getElementById('tulisanList');
tulisan.forEach(t=>{const el=document.createElement('div');el.className='item';el.innerHTML='<div><b>'+t.judul+'</b><div class="badge">'+t.tgl+'</div></div><em style="color:#a3adb8">'+t.kutipan+'</em>'; tl.appendChild(el);});

// ===== Links
const links={
  site:'https://alimuhsikemal.com/',
  youtube:'https://www.youtube.com/channel/UCtUiw0MUdMxoCeBNEk_HX6w',
  tiktok:'https://tiktok.com/@alimuhsikemal',
  x:'https://x.com/alimuhsikemal',
  instagram:'https://instagram.com/alimuhsikemal',
  threads:'https://www.threads.net/@alimuhsikemal',
  facebook:'https://www.facebook.com/share/1AiwxLbySu/',
  whatsapp:'https://wa.me/6281992099999'
};
document.getElementById('site').href=links.site;
document.getElementById('yt').href=links.youtube;
document.getElementById('tt').href=links.tiktok;
document.getElementById('x').href=links.x;
document.getElementById('ig').href=links.instagram;
document.getElementById('threads').href=links.threads;
document.getElementById('fb').href=links.facebook;
document.getElementById('wa').href=links.whatsapp;

// Footer year
document.getElementById('year').textContent = new Date().getFullYear();
</script>
</body>
</html>
